/**
 * 漢字→ひらがな読みマッピング
 * スペル確認検索で漢字入力→ひらがな意味のマッチングに使用
 */

/** 漢字（単字・熟語）→ ひらがな読み候補 */
export const KANJI_READINGS: Record<string, string[]> = {
  // === 動物 ===
  "蟻": ["あり"],
  "猿": ["さる"],
  "蝙蝠": ["こうもり"],
  "蜂": ["はち"],
  "虫": ["むし"],
  "猫": ["ねこ"],
  "鱈": ["たら"],
  "牛": ["うし", "ぎゅう"],
  "犬": ["いぬ"],
  "鰻": ["うなぎ"],
  "妖精": ["ようせい"],
  "蠅": ["はえ"],
  "蝿": ["はえ"],
  "狐": ["きつね"],
  "鶏": ["にわとり", "とり"],
  "豚": ["ぶた"],
  "鯉": ["こい"],
  "梟": ["ふくろう"],
  "鼠": ["ねずみ"],
  "熊": ["くま"],
  "鳥": ["とり"],
  "猪": ["いのしし"],
  "鹿": ["しか", "じか"],
  "鳩": ["はと"],
  "家鴨": ["あひる"],
  "魚": ["さかな"],
  "蚤": ["のみ"],
  "蛙": ["かえる"],
  "山羊": ["やぎ"],
  "鷹": ["たか"],
  "獅子": ["しし"],
  "馬": ["うま"],
  "蛾": ["が"],
  "白鳥": ["はくちょう"],
  "蛤": ["はまぐり"],
  "鮪": ["まぐろ"],
  "狼": ["おおかみ"],
  "縞馬": ["しまうま"],
  "鯨": ["くじら"],
  "鮫": ["さめ"],
  "蛇": ["へび"],
  "鷲": ["わし"],
  "鶴": ["つる"],
  "駱駝": ["らくだ"],
  "河馬": ["かば"],
  "虎": ["とら"],
  "珊瑚": ["さんご"],
  "鯖": ["さば"],
  "蛸": ["たこ"],
  "孔雀": ["くじゃく"],
  "雀": ["すずめ"],
  "海豚": ["いるか"],
  "金魚": ["きんぎょ"],
  "象": ["ぞう"],
  "栗鼠": ["りす"],
  "蜻蛉": ["とんぼ"],
  "水母": ["くらげ"],
  "蝸牛": ["かたつむり"],
  "海老": ["えび"],
  "蟷螂": ["かまきり"],
  "蠍": ["さそり"],
  "亀": ["かめ"],
  "蝶": ["ちょう", "ちょうちょ"],
  "雉": ["きじ"],
  "動物": ["どうぶつ"],
  "昆虫": ["こんちゅう"],
  "哺乳類": ["ほにゅうるい"],
  "麒麟": ["きりん"],
  "豹": ["ひょう"],
  "犀": ["さい"],
  "兎": ["うさぎ"],
  "鴉": ["からす"],
  "烏": ["からす"],
  "鰹": ["かつお"],
  "鮭": ["さけ"],
  "鶯": ["うぐいす"],
  "驢馬": ["ろば"],
  "竜": ["りゅう"],
  "龍": ["りゅう"],
  "隼": ["はやぶさ"],
  "蜘蛛": ["くも"],
  "人参": ["にんじん"],
  "鑓烏賊": ["いか"],
  "烏賊": ["いか"],
  "蟹": ["かに"],
  "貝": ["かい"],
  "牡蠣": ["かき"],
  "雲丹": ["うに"],
  "海星": ["ひとで"],
  "芋虫": ["いもむし"],
  "啄木鳥": ["きつつき"],

  // === 食べ物 ===
  "卵": ["たまご"],
  "玉子": ["たまご"],
  "無花果": ["いちじく"],
  "大豆": ["だいず"],
  "茶": ["ちゃ", "おちゃ"],
  "山芋": ["やまいも"],
  "林檎": ["りんご"],
  "豆": ["まめ"],
  "牛肉": ["ぎゅうにく"],
  "飴": ["あめ"],
  "唐辛子": ["とうがらし"],
  "玉蜀黍": ["とうもろこし"],
  "果物": ["くだもの"],
  "大蒜": ["にんにく"],
  "蒜": ["にんにく"],
  "生姜": ["しょうが"],
  "穀物": ["こくもつ"],
  "葡萄": ["ぶどう"],
  "蜂蜜": ["はちみつ"],
  "氷": ["こおり"],
  "肉": ["にく"],
  "牛乳": ["ぎゅうにゅう"],
  "味噌": ["みそ"],
  "餅": ["もち"],
  "麺": ["めん"],
  "玉葱": ["たまねぎ"],
  "桃": ["もも"],
  "梨": ["なし"],
  "胡椒": ["こしょう"],
  "梅": ["うめ"],
  "豚肉": ["ぶたにく"],
  "芋": ["いも", "じゃがいも"],
  "米": ["こめ"],
  "塩": ["しお"],
  "砂糖": ["さとう"],
  "寿司": ["すし"],
  "鮨": ["すし"],
  "蕪": ["かぶ"],
  "胡桃": ["くるみ"],
  "小麦": ["こむぎ"],
  "小麦粉": ["こむぎこ"],
  "大麦": ["おおむぎ"],
  "鶏肉": ["とりにく"],
  "大根": ["だいこん"],
  "苺": ["いちご"],
  "蜜柑": ["みかん"],
  "西瓜": ["すいか"],
  "胡瓜": ["きゅうり"],
  "茄子": ["なす"],
  "茸": ["きのこ"],
  "南瓜": ["かぼちゃ"],
  "葱": ["ねぎ"],
  "食事": ["しょくじ"],
  "食べ物": ["たべもの"],
  "味": ["あじ"],
  "料理": ["りょうり"],
  "甘い": ["あまい"],
  "酸い": ["すっぱい"],
  "苦い": ["にがい"],
  "生": ["なま"],
  "種": ["たね"],
  "菠薐草": ["ほうれんそう"],
  "豆腐": ["とうふ"],
  "餃子": ["ぎょうざ"],
  "仔牛肉": ["こうしにく"],
  "羊肉": ["ひつじにく"],
  "仔羊肉": ["こひつじにく"],

  // === 職業 ===
  "看護師": ["かんごし"],
  "王": ["おう", "おうさま"],
  "女王": ["じょおう"],
  "賢者": ["けんじゃ"],
  "俳優": ["はいゆう"],
  "職人": ["しょくにん"],
  "家庭教師": ["かていきょうし"],
  "鍛冶屋": ["かじや"],
  "市長": ["しちょう"],
  "鉱夫": ["こうふ"],
  "泥棒": ["どろぼう"],
  "医者": ["いしゃ"],
  "運転手": ["うんてんしゅ"],
  "編集者": ["へんしゅうしゃ"],
  "農家": ["のうか"],
  "漁師": ["りょうし"],
  "猟師": ["りょうし"],
  "騎士": ["きし"],
  "弁護士": ["べんごし"],
  "海賊": ["かいぞく"],
  "選手": ["せんしゅ"],
  "陶芸家": ["とうげいか"],
  "王子": ["おうじ"],
  "水兵": ["すいへい"],
  "歌手": ["かしゅ"],
  "仕立て": ["しったて"],
  "商人": ["しょうにん"],
  "芸術家": ["げいじゅつか"],
  "裁判官": ["さいばんかん"],
  "将軍": ["しょうぐん"],
  "管理人": ["かんりにん"],
  "先生": ["せんせい"],
  "教師": ["きょうし"],
  "戦士": ["せんし"],
  "大工": ["だいく"],
  "作曲家": ["さっきょくか"],
  "指揮者": ["しきしゃ"],
  "探偵": ["たんてい"],
  "外交官": ["がいこうかん"],
  "監督": ["かんとく"],
  "庭師": ["にわし"],
  "知事": ["ちじ"],
  "発明家": ["はつめいか"],
  "魔術師": ["まじゅつし"],
  "大臣": ["だいじん"],
  "音楽家": ["おんがくか"],
  "小説家": ["しょうせつか"],
  "画家": ["がか"],
  "薬剤師": ["やくざいし"],
  "詩人": ["しじん"],
  "大統領": ["だいとうりょう"],
  "教授": ["きょうじゅ"],
  "記者": ["きしゃ"],
  "科学者": ["かがくしゃ"],
  "秘書": ["ひしょ"],
  "翻訳家": ["ほんやくか"],
  "建築家": ["けんちくか"],
  "宇宙飛行士": ["うちゅうひこうし"],
  "消防士": ["しょうぼうし"],
  "獣医": ["じゅうい"],
  "技術": ["ぎじゅつ"],
  "仕事": ["しごと"],
  "給与": ["きゅうよ"],
  "労働": ["ろうどう"],
  "任務": ["にんむ"],
  "作家": ["さっか"],
  "床屋": ["とこや"],
  "兵士": ["へいし"],
  "外科医": ["げかい"],
  "内科医": ["ないかい"],
  "歯医者": ["はいしゃ"],

  // === 趣味 ===
  "弓": ["ゆみ"],
  "太鼓": ["たいこ"],
  "釣り": ["つり"],
  "泳ぐ": ["およぐ"],
  "歌": ["うた"],
  "花": ["はな"],
  "庭": ["にわ"],
  "森": ["もり"],
  "自然": ["しぜん"],
  "映画": ["えいが"],
  "音楽": ["おんがく"],
  "本": ["ほん"],
  "詩": ["し"],
  "絵": ["え"],
  "色": ["いろ"],
  "旅行": ["りょこう"],
  "趣味": ["しゅみ"],
  "踊り": ["おどり"],
  "日記": ["にっき"],
  "陶芸": ["とうげい"],
  "折紙": ["おりがみ"],
  "折り紙": ["おりがみ"],
  "水泳": ["すいえい"],
  "野球": ["やきゅう"],
  "剣": ["けん", "つるぎ"],
  "笛": ["ふえ"],
  "盆栽": ["ぼんさい"],
  "漫画": ["まんが"],
  "小説": ["しょうせつ"],
  "写真": ["しゃしん"],
  "登る": ["のぼる"],
  "走る": ["はしる"],
  "遊ぶ": ["あそぶ"],
  "踊る": ["おどる"],
  "編む": ["あむ"],
  "彫る": ["ほる"],
  "織る": ["おる"],
  "描く": ["えがく", "かく"],
  "図書館": ["としょかん"],
  "迷路": ["めいろ"],
  "神話": ["しんわ"],
  "物語": ["ものがたり"],
  "旗": ["はた"],
  "凧": ["たこ"],
};

/**
 * 漢字を含むクエリから、ひらがな読みの候補を生成する。
 * 熟語優先でマッチし、見つからなければ1文字ずつ分解する。
 */
export function expandKanjiQuery(query: string): string[] {
  const results: string[] = [];

  // まずクエリ全体で熟語マッチを試みる
  if (KANJI_READINGS[query]) {
    results.push(...KANJI_READINGS[query]);
  }

  // 2文字以上の部分文字列で熟語マッチ（長い方優先）
  for (let len = Math.min(query.length, 5); len >= 2; len--) {
    for (let i = 0; i <= query.length - len; i++) {
      const sub = query.substring(i, i + len);
      if (KANJI_READINGS[sub]) {
        for (const reading of KANJI_READINGS[sub]) {
          if (!results.includes(reading)) {
            results.push(reading);
          }
        }
      }
    }
  }

  // 1文字ずつ
  for (const ch of query) {
    if (KANJI_READINGS[ch]) {
      for (const reading of KANJI_READINGS[ch]) {
        if (!results.includes(reading)) {
          results.push(reading);
        }
      }
    }
  }

  return results;
}
